# guide

## framework

* vite
* react
* ts
* koa
* antd

## utils

* lowdb
* lodash
* mitt
* axios

## 环境

* node

## 使用

* npm install
* npm run server
* npm run dev

## 需求

- [x] 1. 加载我们所提供的数据；

- [x] 2. 以列表的形式展示账单内容，并且提供下拉框选择月份进行筛选，其中列表中所展示的账单为选择月份的账单；

- [x] 3. 支持使用者添加账单；

- [x] 4. 简单地统计并展示所选月份的收入和支出总金额。

- [x] 1. 对账单分类进行二次筛选

- [x] 2. 对选择月份内的所有账单根据账单分类进行支出金额统计，并进行排序。

## 思考过程

1. 加载所提供的数据

提供的数据均为csv文件，普通来说应当通过解析对应csv文件来获取内容数据。但前端解析基本需要通过`input`标签，行为触发后选择对应文件再读取内容，选择添加账单的csv文件是合理的，但若要选择分类的csv文件是略不合理的。于是我觉得这实际本就是接口交互的过程，便利用Koa搭建了基本的服务，对应分类和账单的数据传递，在解析上也比前端解析更简单一些，获得对应文本内容后再依照格式进行分隔即可。

2. 以列表的形式展示账单

这部分是简单的前端页面展示内容，考察前端技术栈及UI框架的使用。

3. 筛选、排序、总计

* 排序：使用UI组件中提供的排序功能帮我简化了这部分对于数组的排序操作
* 筛选：需要将时间转化，方便做月份上的过滤，类别和分类上则更为简单些
* 总计：由于表中的数据基本都是偏整形，直接做了累加，实际上为了避免js的精度问题应当考虑一些数学库来操作

4. 添加账单

~~写到这部分的时候我才意识到应当是在页面交互添加单条账单信息~~

导入csv数据的方式让我从最开始就把这一需求理解为了选择csv文件解析添加，因此归纳到了加载提供数据这一范畴。由于已经搭建了服务，添加数据后的问题也转向了接口请求，为了不引入`mysql`和`mongodb`等数据库的环境问题，变得过于复杂，使用`lowdb`来模拟了这一过程。

## QA

Q: 为何使用React + TS + vite

A: 在过去的项目经验中使用的基本都是vue + webpack的框架，而前端日新月异，既然没有任何的技术限制，多做一些尝试会更有趣。

Q: 遇到的主要问题

A: 应用本身比较简单，需求点也没有很复杂，实际上功能点的开发上很轻松。遇到的问题主要在于React + ts的结合使用上，之前并没有这样一步到胃的经验，这让我花费了更多的时间去参考一些示例，或者依照过去vue项目中的经验与概念来解决这些问题，最后比较顺利。

Q: 总结

A: 其实最开始我并没有打算投递这个岗位，毕竟我既不算忠实粉丝，也实际并没有怎么使用过XMind。但看到这个链接的作业题，我还是很好奇的点了进去，并在看完需求描述后起了兴趣。毕竟，这比其他HR的招聘描述要与众不同得多，相比于抱有疑问的问答流程，这无疑让我觉得更加有趣。因此使用的技术栈方面也包含这部分原因，无论结果如何这都是个很好的尝试，因此希望不要误解，我并不是一个React或者koa的丰富经验的开发者，但我也有信心很快上手学习并且熟练使用他们。感谢您能看到这里。

